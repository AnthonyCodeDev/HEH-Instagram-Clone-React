import { useState } from "react";
import { Link, useNavigate } from "react-router-dom";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card } from "@/components/ui/card";

const Register = () => {
    const [showPassword, setShowPassword] = useState(false);
    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
    const navigate = useNavigate();

    const handleRegister = () => {
        const maxAgeSeconds = 60 * 60 * 24 * 7;
        document.cookie = `login=true; Path=/; Max-Age=${maxAgeSeconds}`;
        navigate("/", { replace: true });
    };

    return (
        <div className="min-h-screen flex flex-col md:flex-row">
            {/* Left side - Branding per spec (copie Login) */}
            <div className="flex-1 flex flex-col items-center justify-center text-white p-8 md:p-0"
                style={{ background: "linear-gradient(216deg, #FF482B 1.1%, #C813AA 115.96%)" }}>
                {/* Logo icon */}
                <div className="mb-4">
                    <svg width="62" height="60" viewBox="0 0 62 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.3107 0C45.0684 1.81784e-10 51.9477 -0.000404238 56.3693 4.08691C56.6651 4.36029 56.9495 4.64568 57.2228 4.94141C61.3102 9.36307 61.3107 16.2421 61.3107 30C61.3107 43.7579 61.3102 50.6369 57.2228 55.0586C56.9495 55.3543 56.6651 55.6397 56.3693 55.9131C51.9477 60.0004 45.0684 60 31.3107 60H30.5412C16.7835 60 9.90428 60.0003 5.4826 55.9131C5.1868 55.6397 4.90155 55.3544 4.62811 55.0586C0.540905 50.6369 0.541199 43.7577 0.541199 30C0.541199 16.2423 0.540905 9.36308 4.62811 4.94141C4.90155 4.64561 5.1868 4.36035 5.4826 4.08691C9.90428 -0.000293261 16.7835 0 30.5412 0H31.3107ZM30.5412 10.7695C19.9203 10.7695 11.3107 19.3791 11.3107 30C11.3107 40.6209 19.9203 49.2305 30.5412 49.2305C41.1621 49.2305 49.7717 40.6209 49.7717 30C49.7717 19.3791 41.1621 10.7695 30.5412 10.7695ZM30.5412 17.6289C37.3734 17.6289 42.9123 23.1678 42.9123 30C42.9123 36.8322 37.3734 42.3711 30.5412 42.3711C23.709 42.3711 18.1701 36.8322 18.1701 30C18.1701 23.1678 23.709 17.6289 30.5412 17.6289ZM50.1564 6.1543C47.8199 6.15438 45.926 8.04823 45.926 10.3848C45.926 12.7212 47.82 14.6152 50.1564 14.6152C52.493 14.6152 54.3868 12.7213 54.3869 10.3848C54.3869 8.04818 52.493 6.1543 50.1564 6.1543Z" fill="white" />
                    </svg>
                </div>

                {/* Wordmark */}
                <div className="mb-3">
                    <svg width="174" height="40" viewBox="0 0 174 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.8827 32.4742C10.4756 32.4742 8.37299 32.1117 6.57491 31.3866C4.77683 30.6616 3.35577 29.6248 2.31172 28.2762C1.28218 26.9277 0.702153 25.3181 0.571647 23.4475L0.549896 23.1213H5.90063L5.94413 23.3823C6.10364 24.2813 6.49516 25.0571 7.11868 25.7096C7.74221 26.3622 8.5615 26.8697 9.57654 27.2322C10.6061 27.5802 11.7734 27.7542 13.0784 27.7542C14.398 27.7542 15.5363 27.573 16.4933 27.2104C17.4649 26.8479 18.2117 26.3332 18.7337 25.6661C19.2557 24.9846 19.5167 24.1943 19.5167 23.2953V23.2735C19.5167 22.099 19.0745 21.1709 18.1899 20.4894C17.3199 19.8079 15.8698 19.2496 13.8397 18.8146L10.4683 18.1185C7.3942 17.4805 5.08859 16.4365 3.55153 14.9864C2.01446 13.5218 1.24593 11.6223 1.24593 9.28766V9.2659C1.26043 7.40982 1.7607 5.793 2.74674 4.41544C3.74729 3.02338 5.12485 1.94308 6.87942 1.17455C8.634 0.391517 10.6351 0 12.8827 0C15.1593 0 17.1531 0.377016 18.8642 1.13105C20.5753 1.88508 21.9166 2.93638 22.8881 4.28494C23.8742 5.6335 24.4179 7.19956 24.5194 8.98314L24.5412 9.35291H19.1905L19.147 9.07015C19.0165 8.15661 18.6757 7.38082 18.1247 6.74279C17.5736 6.09027 16.8486 5.58999 15.9496 5.24198C15.0505 4.89396 14.0137 4.71996 12.8392 4.71996C11.6211 4.71996 10.5626 4.90121 9.66354 5.26373C8.77901 5.61174 8.09023 6.10477 7.5972 6.74279C7.11868 7.38082 6.87942 8.12035 6.87942 8.96139V8.98314C6.87942 10.0852 7.32169 10.9842 8.20623 11.6803C9.10527 12.3618 10.4973 12.8983 12.3824 13.2898L15.7538 13.9859C19.031 14.6674 21.4163 15.7114 22.9099 17.118C24.4034 18.5101 25.1502 20.4314 25.1502 22.882V22.9038C25.1502 24.8468 24.6572 26.5362 23.6712 27.9717C22.6996 29.4073 21.2931 30.5166 19.4515 31.2996C17.6244 32.0827 15.4348 32.4742 12.8827 32.4742Z" fill="white" />
                        <path d="M36.4616 32.3872C34.069 32.3872 32.2854 31.8651 31.1109 30.8211C29.9508 29.7771 29.3708 28.066 29.3708 25.6879V13.0506H26.1081V8.87439H29.3708V3.02338H34.8738V8.87439H39.1587V13.0506H34.8738V25.2529C34.8738 26.3694 35.1203 27.1452 35.6133 27.5802C36.1208 28.0007 36.8604 28.211 37.8319 28.211C38.1074 28.211 38.3467 28.2037 38.5497 28.1892C38.7672 28.1602 38.9702 28.1385 39.1587 28.124V32.1914C38.8397 32.2349 38.4482 32.2784 37.9842 32.3219C37.5346 32.3654 37.0271 32.3872 36.4616 32.3872Z" fill="white" />
                        <path d="M41.9872 31.9304V8.87439H47.3814V12.8548H47.5119C47.86 11.4628 48.4907 10.3752 49.4043 9.59217C50.3323 8.79463 51.4634 8.39587 52.7974 8.39587C53.1309 8.39587 53.4499 8.41762 53.7545 8.46112C54.059 8.50462 54.3127 8.55537 54.5157 8.61338V13.5073C54.2982 13.4203 53.9865 13.3478 53.5805 13.2898C53.1889 13.2318 52.7612 13.2028 52.2972 13.2028C51.2821 13.2028 50.4048 13.4131 49.6653 13.8336C48.9258 14.2396 48.3602 14.8414 47.9687 15.6389C47.5772 16.4365 47.3814 17.408 47.3814 18.5536V31.9304H41.9872Z" fill="white" />
                        <path d="M62.695 32.3219C61.1724 32.3219 59.8238 32.0319 58.6493 31.4519C57.4892 30.8573 56.583 30.0381 55.9304 28.994C55.2924 27.9355 54.9734 26.7247 54.9734 25.3616V25.3181C54.9734 23.2735 55.7347 21.6567 57.2572 20.4676C58.7943 19.2641 60.9549 18.5826 63.739 18.4231L72.5482 17.8793V21.4682L64.5003 21.9685C63.1662 22.0555 62.1439 22.3745 61.4334 22.9255C60.7229 23.4765 60.3676 24.2088 60.3676 25.1223V25.1441C60.3676 26.0866 60.7229 26.8334 61.4334 27.3844C62.1584 27.921 63.1155 28.1892 64.3045 28.1892C65.3486 28.1892 66.2766 27.979 67.0887 27.5585C67.9152 27.1379 68.5677 26.5652 69.0463 25.8401C69.5248 25.1151 69.764 24.2958 69.764 23.3823V16.4655C69.764 15.3054 69.3943 14.3919 68.6547 13.7248C67.9297 13.0433 66.8784 12.7026 65.5008 12.7026C64.2248 12.7026 63.2025 12.9781 62.434 13.5291C61.6654 14.0656 61.1869 14.7616 60.9984 15.6172L60.9549 15.8129H55.9522L55.9739 15.5519C56.0899 14.1889 56.5467 12.9708 57.3442 11.8978C58.1418 10.8102 59.2438 9.95468 60.6504 9.33116C62.0714 8.70763 63.7535 8.39587 65.6966 8.39587C67.6252 8.39587 69.2928 8.71488 70.6993 9.35291C72.1204 9.99094 73.2152 10.8827 73.9837 12.0283C74.7668 13.1738 75.1583 14.5224 75.1583 16.074V31.9304H69.764V28.385H69.6335C69.1985 29.1825 68.633 29.8786 67.937 30.4731C67.2409 31.0676 66.4434 31.5244 65.5443 31.8434C64.6598 32.1624 63.71 32.3219 62.695 32.3219Z" fill="white" />
                        <path d="M89.058 40C87.0279 40 85.2516 39.7172 83.729 39.1517C82.2209 38.6007 81.0174 37.8394 80.1184 36.8679C79.2193 35.8963 78.661 34.8088 78.4435 33.6052L78.4 33.4095H83.7073L83.7943 33.5835C84.0843 34.2505 84.6788 34.8015 85.5779 35.2365C86.4914 35.6861 87.6442 35.9108 89.0362 35.9108C90.8053 35.9108 92.1611 35.4758 93.1037 34.6058C94.0462 33.7357 94.5175 32.5684 94.5175 31.1039V27.776H94.4087C93.9882 28.6025 93.4227 29.313 92.7122 29.9076C92.0161 30.5021 91.1968 30.9661 90.2543 31.2996C89.3263 31.6331 88.3112 31.7999 87.2092 31.7999C85.2806 31.7999 83.5985 31.3286 82.1629 30.3861C80.7419 29.4435 79.6398 28.1095 78.8568 26.3839C78.0883 24.6438 77.704 22.5775 77.704 20.1849V20.1631C77.704 17.727 78.0955 15.6389 78.8785 13.8989C79.6761 12.1443 80.7926 10.7885 82.2282 9.83143C83.6638 8.87439 85.3531 8.39587 87.2962 8.39587C88.3837 8.39587 89.3843 8.58438 90.2978 8.96139C91.2113 9.32391 92.0089 9.83143 92.6904 10.484C93.3864 11.1365 93.952 11.905 94.387 12.7896H94.5175V8.87439H99.9335V31.2779C99.9335 33.0179 99.4912 34.5405 98.6067 35.8456C97.7221 37.1651 96.4678 38.1874 94.8438 38.9124C93.2197 39.6375 91.2911 40 89.058 40ZM88.9057 27.6237C90.0368 27.6237 91.0228 27.3264 91.8639 26.7319C92.7049 26.1229 93.3574 25.2674 93.8215 24.1653C94.3 23.0633 94.5392 21.7727 94.5392 20.2936V20.2719C94.5392 18.7783 94.3 17.4878 93.8215 16.4002C93.3429 15.2982 92.6832 14.4499 91.8421 13.8554C91.0011 13.2608 90.0223 12.9636 88.9057 12.9636C87.7457 12.9636 86.7379 13.2608 85.8824 13.8554C85.0268 14.4499 84.367 15.2909 83.903 16.3785C83.439 17.466 83.207 18.7638 83.207 20.2719V20.2936C83.207 21.8017 83.439 23.1068 83.903 24.2088C84.367 25.2964 85.0268 26.1374 85.8824 26.7319C86.7379 27.3264 87.7457 27.6237 88.9057 27.6237Z" fill="white" />
                        <path d="M103.48 31.9304V8.87439H108.874V12.8548H109.004C109.353 11.4628 109.983 10.3752 110.897 9.59217C111.825 8.79463 112.956 8.39587 114.29 8.39587C114.623 8.39587 114.942 8.41762 115.247 8.46112C115.552 8.50462 115.805 8.55537 116.008 8.61338V13.5073C115.791 13.4203 115.479 13.3478 115.073 13.2898C114.681 13.2318 114.254 13.2028 113.79 13.2028C112.775 13.2028 111.897 13.4131 111.158 13.8336C110.418 14.2396 109.853 14.8414 109.461 15.6389C109.07 16.4365 108.874 17.408 108.874 18.5536V31.9304H103.48Z" fill="white" />
                        <path d="M124.188 32.3219C122.665 32.3219 121.316 32.0319 120.142 31.4519C118.982 30.8573 118.076 30.0381 117.423 28.994C116.785 27.9355 116.466 26.7247 116.466 25.3616V25.3181C116.466 23.2735 117.227 21.6567 118.75 20.4676C120.287 19.2641 122.447 18.5826 125.232 18.4231L134.041 17.8793V21.4682L125.993 21.9685C124.659 22.0555 123.637 22.3745 122.926 22.9255C122.215 23.4765 121.86 24.2088 121.86 25.1223V25.1441C121.86 26.0866 122.215 26.8334 122.926 27.3844C123.651 27.921 124.608 28.1892 125.797 28.1892C126.841 28.1892 127.769 27.979 128.581 27.5585C129.408 27.1379 130.06 26.5652 130.539 25.8401C131.017 25.1151 131.257 24.2958 131.257 23.3823V16.4655C131.257 15.3054 130.887 14.3919 130.147 13.7248C129.422 13.0433 128.371 12.7026 126.993 12.7026C125.717 12.7026 124.695 12.9781 123.927 13.5291C123.158 14.0656 122.679 14.7616 122.491 15.6172L122.447 15.8129H117.445L117.466 15.5519C117.582 14.1889 118.039 12.9708 118.837 11.8978C119.634 10.8102 120.736 9.95468 122.143 9.33116C123.564 8.70763 125.246 8.39587 127.189 8.39587C129.118 8.39587 130.785 8.71488 132.192 9.35291C133.613 9.99094 134.708 10.8827 135.476 12.0283C136.259 13.1738 136.651 14.5224 136.651 16.074V31.9304H131.257V28.385H131.126C130.691 29.1825 130.126 29.8786 129.43 30.4731C128.733 31.0676 127.936 31.5244 127.037 31.8434C126.152 32.1624 125.203 32.3219 124.188 32.3219Z" fill="white" />
                        <path d="M140.154 31.9304V8.87439H145.548V12.572H145.678C146.157 11.3105 146.962 10.3027 148.093 9.54867C149.224 8.78013 150.551 8.39587 152.073 8.39587C153.146 8.39587 154.11 8.58438 154.966 8.96139C155.822 9.32391 156.547 9.85318 157.141 10.5492C157.75 11.2307 158.192 12.0645 158.468 13.0506H158.577C158.954 12.0935 159.49 11.2742 160.186 10.5927C160.897 9.89668 161.723 9.36016 162.666 8.98314C163.623 8.59163 164.652 8.39587 165.754 8.39587C167.277 8.39587 168.597 8.72213 169.713 9.37466C170.844 10.0127 171.721 10.9117 172.345 12.0718C172.983 13.2173 173.302 14.5659 173.302 16.1175V31.9304H167.886V17.4443C167.886 16.0232 167.531 14.9212 166.82 14.1381C166.11 13.3551 165.087 12.9636 163.753 12.9636C162.883 12.9636 162.115 13.1666 161.448 13.5726C160.795 13.9641 160.28 14.5151 159.903 15.2257C159.541 15.9362 159.36 16.7555 159.36 17.6835V31.9304H154.096V17.1615C154.096 15.8564 153.726 14.8341 152.987 14.0946C152.262 13.3406 151.268 12.9636 150.007 12.9636C149.137 12.9636 148.368 13.1738 147.701 13.5943C147.034 14.0149 146.505 14.5876 146.113 15.3127C145.736 16.0377 145.548 16.8715 145.548 17.814V31.9304H140.154Z" fill="white" />
                    </svg>
                </div>

                {/* Subtitle */}
                <p className="text-white text-[20px] leading-6 tracking-[-0.02em] mb-10">Crée ton compte et rejoins Stragram.</p>

                {/* Illustration block (cachée sur petits écrans) */}
                <img src="/photo-login.svg" alt="Illustration" className="hidden md:block w-full max-w-[490px] h-auto object-contain" />
            </div>

            {/* Right side - Register form */}
            <div className="flex-1 flex items-center justify-center p-6 sm:p-8 bg-white">
                <Card className="w-full max-w-md p-6 sm:p-8 shadow-card">
                    <div className="mb-8">
                        <h2 className="text-[21.3px] leading-[26px] font-semibold tracking-[-0.035em] text-gray-900">Créer un compte</h2>
                    </div>

                    <form className="space-y-6">
                        <div>
                            <Input
                                type="email"
                                placeholder="Adresse email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                className="w-full h-12 rounded-xl border-gray-200 focus:border-stragram-primary"
                            />
                        </div>

                        <div className="relative">
                            <Input
                                type={showPassword ? "text" : "password"}
                                placeholder="Mot de passe"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full h-12 rounded-xl border-gray-200 focus:border-stragram-primary pr-12"
                            />
                            <button
                                type="button"
                                onClick={() => setShowPassword(!showPassword)}
                                className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
                            >
                                {showPassword ? (
                                    <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a18.45 18.45 0 0 1 5.06-6.94" /><path d="M10.58 10.58a2 2 0 1 0 2.83 2.83" /><path d="M23 1 1 23" /></svg>
                                ) : (
                                    <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z" /><circle cx="12" cy="12" r="3" /></svg>
                                )}
                            </button>
                        </div>

                        <Button
                            variant="stragram"
                            size="lg"
                            className="w-full bg-[#EC3558] hover:bg-[#EC3558]/90 rounded-[30.35px] py-[19.17px]"
                            onClick={handleRegister}
                        >
                            Créer mon compte
                        </Button>

                        <div className="relative my-6">
                            <div className="absolute inset-0 flex items-center">
                                <div className="w-full border-t border-gray-200"></div>
                            </div>
                            <div className="relative flex justify-center text-sm">
                                <span className="px-2 bg-white text-gray-500">ou</span>
                            </div>
                        </div>

                        <Button
                            variant="google"
                            size="lg"
                            className="w-full"
                        >
                            <svg className="w-5 h-5 mr-2" viewBox="0 0 24 24">
                                <path fill="white" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                                <path fill="white" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                                <path fill="white" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                                <path fill="white" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                            </svg>
                            S'inscrire avec Google
                        </Button>

                        <div className="text-center space-y-2">
                            <span className="text-sm text-gray-600">Déjà un compte ?</span>
                            <Link to="/signin" className="block text-sm text-stragram-primary hover:underline">Se connecter</Link>
                        </div>
                    </form>
                </Card>
            </div>
        </div>
    );
};

export default Register;


